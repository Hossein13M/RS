<div class="dialog-container">
    <div title="{{ title }}" appDialogHeader>
        <mat-icon (click)="this.dialogRef.close()" class="icon-header">close</mat-icon>
    </div>
    <form [formGroup]="form" class="setting-form-container" dir="rtl">
        <div class="setting-form-row">
            <mat-form-field appearance="outline">
                <mat-label>
                    نوع حساب
                    <span style="color: red">*</span>
                </mat-label>
                <mat-select formControlName="accountTypeId">
                    <mat-option style="text-align: right" *ngFor="let c of bankAccountTypes" [value]="c?.id">
                        {{ c?.name }}
                    </mat-option>
                </mat-select>
                <mat-error> وارد کردن این فیلد الزامی است. </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>
                    نام بانک
                    <span style="color: red">*</span>
                </mat-label>
                <mat-select formControlName="bankId">
                    <mat-option style="text-align: right" *ngFor="let c of banks" [value]="c?.id">
                        {{ c?.name }}
                    </mat-option>
                </mat-select>
                <mat-error> وارد کردن این فیلد الزامی است. </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>
                    نام و کد شعبه
                    <span style="color: red">*</span>
                </mat-label>
                <mat-select formControlName="branchId">
                    <mat-option style="text-align: right" *ngFor="let c of bankBranches" [value]="c?.id">
                        {{ c?.name }}
                        <span style="font-size: 12px; color: #9ea1a9">
                            {{ c?.code }}
                        </span>
                    </mat-option>
                </mat-select>
                <mat-error> وارد کردن این فیلد الزامی است. </mat-error>
            </mat-form-field>
        </div>
        <div class="setting-form-row">
            <mat-form-field class="full-wid" appearance="outline">
                <mat-label>
                    تاریخ افتتاح
                    <span style="color: red">*</span>
                </mat-label>
                <input (click)="start123.open()" matInput formControlName="openingDate" [matDatepicker]="start123" />
                <mat-datepicker-toggle matSuffix [for]="start123"></mat-datepicker-toggle>
                <mat-datepicker #start123></mat-datepicker>
                <mat-error> وارد کردن این فیلد الزامی است. </mat-error>
            </mat-form-field>
            <mat-form-field class="full-wid" appearance="outline">
                <mat-label> تاریخ پایان قرارداد </mat-label>
                <input (click)="start.open()" matInput formControlName="endDate" [matDatepicker]="start" />
                <mat-datepicker-toggle matSuffix [for]="start"></mat-datepicker-toggle>
                <mat-datepicker #start></mat-datepicker>
                <mat-error> وارد کردن این فیلد الزامی است. </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>
                    شماره سپرده
                    <span style="color: red">*</span>
                </mat-label>
                <input type="number" formControlName="depositNumber" matInput />
            </mat-form-field>
        </div>

        <div class="setting-form-row">
            <mat-form-field appearance="outline">
                <mat-label> نرخ سود </mat-label>
                <input type="number" formControlName="interestRate" matInput />
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label> نرخ ترجیهی </mat-label>
                <input type="number" formControlName="preferedRate" matInput />
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label> نرخ شکست </mat-label>
                <input type="number" formControlName="penaltyRate" matInput />
            </mat-form-field>
        </div>
        <div class="setting-form-row">
            <mat-form-field appearance="outline">
                <mat-label>
                    تواتر واریز سود
                    <span style="color: red">*</span>
                </mat-label>
                <mat-select formControlName="frequenceId">
                    <mat-option style="text-align: right" *ngFor="let c of frequences" [value]="c?.id">
                        {{ c?.name }}
                    </mat-option>
                </mat-select>
                <mat-error> وارد کردن این فیلد الزامی است. </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label> حساب سود واریزی </mat-label>
                <input type="number" formControlName="interestReceivedAccount" matInput />
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label> مانده مسدودی </mat-label>
                <input type="number" formControlName="blockedDepositBalance" matInput />
            </mat-form-field>
        </div>
        <div class="setting-form-row">
            <mat-form-field appearance="outline">
                <mat-label>
                    وضعیت سپرده
                    <span style="color: red">*</span>
                </mat-label>
                <mat-select formControlName="status">
                    <mat-option style="text-align: right" [value]="true"> فعال </mat-option>
                    <mat-option style="text-align: right" [value]="false"> غیرفعال </mat-option>
                </mat-select>
                <mat-error> وارد کردن این فیلد الزامی است. </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>
                    کد سطح Gl
                    <span style="color: red">*</span>
                </mat-label>
                <input type="number" formControlName="glCode" matInput />
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label> مبلغ افتتاح حساب </mat-label>
                <input type="number" formControlName="depositBalance" matInput />
            </mat-form-field>
        </div>
        <div class="setting-form-row">
            <mat-form-field appearance="outline">
                <mat-label>
                    روز پرداخت سود
                    <span style="color: red">*</span>
                </mat-label>
                <mat-select formControlName="paymentDay">
                    <mat-option
                        style="text-align: right"
                        *ngFor="
                            let m of [
                                0,
                                1,
                                2,
                                3,
                                4,
                                5,
                                6,
                                7,
                                8,
                                9,
                                10,
                                11,
                                12,
                                13,
                                14,
                                15,
                                16,
                                17,
                                18,
                                19,
                                20,
                                21,
                                22,
                                23,
                                24,
                                25,
                                26,
                                27,
                                28,
                                29,
                                30,
                                31
                            ]
                        "
                        [value]="m"
                    >
                        {{ m == 0 ? 'ندارد' : m }}
                    </mat-option>
                </mat-select>
                <mat-error> وارد کردن این فیلد الزامی است. </mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>
                    شبا
                    <span style="color: red"> * </span>
                </mat-label>
                <input formControlName="iban" matInput />
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label> توضیحات </mat-label>
                <textarea formControlName="description" matInput></textarea>
            </mat-form-field>
        </div>

        <div class="setting-btn-container">
            <button (click)="close()" style="margin-left: 10px" color="warn" mat-raised-button>
                <mat-icon>close</mat-icon>
                 برگشت
            </button>
            <button *ngIf="!data" (click)="onCreateBranch()" [disabled]="form.invalid" color="accent" mat-raised-button>
                <mat-icon>done</mat-icon>
                ثبت
            </button>
            <button *ngIf="data" (click)="onEditBranch()" [disabled]="form.invalid" color="accent" mat-raised-button>
                <mat-icon>edit</mat-icon>
                ویرایش
            </button>
        </div>
    </form>
</div>
